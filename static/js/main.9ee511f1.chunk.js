(this.webpackJsonpfifteenpuzzle=this.webpackJsonpfifteenpuzzle||[]).push([[0],{22:function(t,e,n){},24:function(t,e,n){},25:function(t,e,n){},28:function(t,e,n){},29:function(t,e,n){},30:function(t,e,n){},31:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),i=n(9),o=n.n(i),a=n(8),u=n(7),s=n(6),l="ACTION_MOVE",p="ACTION_NEW_GAME",f=function(t){return{type:l,payload:t}},d=function(){return{type:p,payload:null}},j=function(t,e){return t[0]===e[0]&&t[1]===e[1]},h=function(t){var e=t[0],n=t[1];return[[e-1,n],[e+1,n],[e,n-1],[e,n+1]].filter((function(t){return function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4;return t[0]>=0&&t[0]<e&&t[1]>=0&&t[1]<n}(t)}))},v=function(t,e){var n=h(t).filter((function(t){return j(t,e)}));return!(!n||!n[0])},b=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:4;return e?e===t[0]*r+t[1]+1:t[0]===n-1&&t[1]===r-1},O=function(t,e){return t.findIndex((function(t){return j(t.coord,e)}))},m=function(t,e,n){var r=O(t,e),c=O(t,n);if(-1!==r&&-1!==c){var i=t.slice(0).map((function(t){return Object.assign({},t)})),o=i[r].coord.slice(0);return i[r].coord=i[c].coord.slice(0),i[c].coord=o,i}};var z=function(t,e){for(var n,r,c=new Array(t*e).fill(0).map((function(t,e){return e})),i=[],o=0;o<t;o++)for(var a=0;a<e;a++){var u={coord:[o,a],value:c.splice((n=0,r=c.length,Math.floor(Math.random()*(r-n))+n),1)[0]};u.done=b(u.coord,u.value),i.push(u)}return i},g=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,n={};return n.grid=z(t,e),n.win=n.grid.filter((function(t){return t.done})).length===n.grid.length,n},y=Object(s.a)({started:!1,moves:0},g()),x=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case l:var n=e.payload,r=t.grid.find((function(t){return!t.value})).coord,c=v(n,r)&&m(t.grid,n,r);if(!c)return t;var i=(c=c.map((function(t){return t.done=b(t.coord,t.value),t}))).filter((function(t){return t.done}));return Object(s.a)(Object(s.a)({},t),{},{started:!0,win:i.length===c.length,moves:t.moves+1,grid:c});case p:return Object(s.a)(Object(s.a)({},y),g());default:return t}},k=n(2),w=n(3),N=n(5),C=n(4),A=(n(22),n(1)),S=function(t){Object(N.a)(n,t);var e=Object(C.a)(n);function n(){return Object(k.a)(this,n),e.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){var t=this;return Object(A.jsxs)("div",{className:"status",children:[Object(A.jsx)("button",{className:"status-button",onClick:function(){t.props.onNewGameClick()},children:Object(A.jsx)("i",{children:"\u041d\u043e\u0432\u0430\u044f \u0438\u0433\u0440\u0430"})}),Object(A.jsx)("span",{className:"status-text",children:Object(A.jsxs)("i",{children:["\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0445\u043e\u0434\u043e\u0432: ",this.props.moves]})})]})}}]),n}(c.a.Component),I=Object(u.b)((function(t){return{moves:t.moves}}),(function(t){return{onNewGameClick:Object(a.a)(d,t)}}))(S),_=(n(24),function(t){Object(N.a)(n,t);var e=Object(C.a)(n);function n(){return Object(k.a)(this,n),e.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){var t={top:25*this.props.coord[0]+"%",left:25*this.props.coord[1]+"%"},e=["puzzle"];return this.props.value||e.push("puzzle-empty"),this.props.done&&e.push("puzzle-done"),Object(A.jsx)("div",{className:e.join(" "),style:t,onClick:this.props.onClick,children:Object(A.jsx)("span",{className:"puzzle-inner",children:this.props.value||""})})}}]),n}(c.a.Component)),E=(n(25),function(t){Object(N.a)(n,t);var e=Object(C.a)(n);function n(){return Object(k.a)(this,n),e.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){return this.props.win?Object(A.jsx)("div",{id:"winner",children:Object(A.jsx)("span",{children:"\u041f\u043e\u0431\u0435\u0434\u0430!"})}):null}}]),n}(c.a.Component)),G=Object(u.b)((function(t){return{win:t.win}}))(E),J=n(13),M=(n(28),function(t){Object(N.a)(n,t);var e=Object(C.a)(n);function n(t){var r,c;return Object(k.a)(this,n),(r=e.call(this,t)).assistant=(c=function(){return r.getStateForAssistant()},Object(J.createAssistant)({getState:c})),r.assistant.on("data",(function(t){var e=t.action;r.dispatchAssistantAction(e)})),r.assistant.on("start",(function(t){})),r}return Object(w.a)(n,[{key:"getStateForAssistant",value:function(){var t,e,n=this.props.puzzles.find((function(t){return!t.value})).coord;return{item_selector:{items:(t=this.props.puzzles,e=n,h(e).map((function(e){return t[O(t,e)]})))}}}},{key:"dispatchAssistantAction",value:function(t){if(t)switch(t.type){case"on_click_puzzle":return void(t.item&&this.props.onPuzzleClick(t.item.coord));case"reset_game":return void this.props.onNewGame();default:throw new Error}}},{key:"render",value:function(){var t=this,e=this.props.puzzles.map((function(e,n){return Object(A.jsx)(_,Object(s.a)(Object(s.a)({},e),{},{onClick:function(){return e.value&&t.props.onPuzzleClick(e.coord)}}),"item:"+n)}));return Object(A.jsxs)("div",{className:"puzzles-wrapper",children:[Object(A.jsx)("div",{className:"puzzles",children:e}),Object(A.jsx)(G,{})]})}}]),n}(c.a.Component)),P=Object(u.b)((function(t){return{puzzles:t.grid}}),(function(t){return{onPuzzleClick:Object(a.a)(f,t),onNewGame:Object(a.a)(d,t)}}))(M),F=(n(29),function(t){Object(N.a)(n,t);var e=Object(C.a)(n);function n(){return Object(k.a)(this,n),e.apply(this,arguments)}return Object(w.a)(n,[{key:"render",value:function(){return Object(A.jsx)("div",{className:"app",children:Object(A.jsxs)("div",{className:"container",children:[Object(A.jsx)(P,{}),Object(A.jsx)(I,{})]})})}}]),n}(c.a.Component)),T="fifteenpuzzle:state",B=(n(30),function(){try{var t=localStorage.getItem(T);if(null===t)return;return JSON.parse(t)}catch(e){return}}()),V=Object(a.b)(x,B);V.subscribe((function(){var t=V.getState();t.win||!t.started?function(){try{localStorage.removeItem(T)}catch(t){}}():function(t){try{var e=JSON.stringify(t);localStorage.setItem(T,e)}catch(n){}}(t)})),o.a.render(Object(A.jsx)(u.a,{store:V,children:Object(A.jsx)(F,{})}),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.9ee511f1.chunk.js.map